<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>

<div th:fragment="sidebar(active)">
    <div class="w-64 h-screen bg-white border-r shadow-sm flex flex-col justify-between py-6 px-4">
        <!-- Logo -->
        <div>
            <div class="flex items-center mb-10 px-2 gap-2">
                <svg width="30" height="27" viewBox="0 0 30 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5.05378 9.26091L8.29718 7.39037L6.48677 4.25634H23.5132L15.0027 19.002L13.1923 15.8625L9.94897 17.7386L15.0027 26.4898L30 0.509766H0L5.05378 9.26091Z" fill="#AB1F24"/>
                </svg>
                <h1 class="text-xl font-semibold flex gap-1">
                    <span class="text-black">My</span>
                    <span class="text-[#ab1f24]">Company</span>
                </h1>
            </div>

            <!-- Navigation -->
            <ul class="space-y-2 text-sm font-medium">
                <li>
                    <a th:href="@{/dashboard}"
                       class="flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-100"
                       th:classappend="${active == 'dashboard'} ? 'bg-gray-100 text-[#ab1f24]'">
                        <svg class="h-6 w-6 "  width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">  <path stroke="none" d="M0 0h24v24H0z"/>  <rect x="4" y="4" width="6" height="5" rx="2" />  <rect x="4" y="13" width="6" height="7" rx="2" />  <rect x="14" y="4" width="6" height="7" rx="2" />  <rect x="14" y="15" width="6" height="5" rx="2" /></svg>
                        Dashboard
                    </a>
                </li>
                <li>
                    <a th:href="@{/dashboard/candidates(page=1, size=5)}"
                       class="flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-100"
                       th:classappend="${active == 'candidate'} ? 'bg-gray-100 text-[#ab1f24]'">
                        <svg class="size-6"  width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">  <path stroke="none" d="M0 0h24v24H0z"/>  <circle cx="9" cy="7" r="4" />  <path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />  <path d="M16 3.13a4 4 0 0 1 0 7.75" />  <path d="M21 21v-2a4 4 0 0 0 -3 -3.85" /></svg>
                        Candidate
                    </a>
                </li>
                <li>
                    <a th:href="@{/dashboard/technologies(page=1, size=5)}"
                       class="flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-100"
                       th:classappend="${active == 'technology'} ? 'bg-gray-100 text-[#ab1f24]'">
                        <svg class="h-6 w-6"  fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>

                        Technology
                    </a>
                </li>
                <li>
                    <a th:href="@{/dashboard/positions(page=1, size=5)}"
                       class="flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-100"
                       th:classappend="${active == 'position'} ? 'bg-gray-100 text-[#ab1f24]'">
                        <svg class="h-6 w-6 "  width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">  <path stroke="none" d="M0 0h24v24H0z"/>  <path d="M3.5 5.5l1.5 1.5l2.5 -2.5" />  <path d="M3.5 11.5l1.5 1.5l2.5 -2.5" />  <path d="M3.5 17.5l1.5 1.5l2.5 -2.5" />  <line x1="11" y1="6" x2="20" y2="6" />  <line x1="11" y1="12" x2="20" y2="12" />  <line x1="11" y1="18" x2="20" y2="18" /></svg>
                        Recruitment Position
                    </a>
                </li>
                <li>
                    <a th:href="@{/dashboard/applications(page=1, size=5)}"
                       class="flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-100"
                       th:classappend="${active == 'application'} ? 'bg-gray-100 text-[#ab1f24]'">
                        <svg class="h-6 w-6"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round">  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />  <polyline points="14 2 14 8 20 8" />  <line x1="16" y1="13" x2="8" y2="13" />  <line x1="16" y1="17" x2="8" y2="17" />  <polyline points="10 9 9 9 8 9" /></svg>
                        Application
                    </a>
                </li>
            </ul>
        </div>

        <!-- Profile + Logout -->
        <div>
            <hr class="my-4"/>
            <p class="text-xs text-gray-400 mb-2">Profile</p>
            <div class="flex items-center gap-3 mb-4">
                <!-- Nếu có avatar thì hiển thị -->
                <img th:if="${adminStay != null and adminStay.avatar != null}"
                     th:src="@{'/uploads/' + 'default_avatar.jpg'}"
                     class="w-10 h-10 rounded-full object-cover"
                     alt="Avatar" />

                <!-- Nếu không có avatar (hoặc chưa login) thì dùng ảnh mặc định -->
                <img th:if="${adminStay == null or adminStay.avatar == null}"
                     src="https://res.cloudinary.com/dyarmkynu/image/upload/v1749743645/360_F_353110097_nbpmfn9iHlxef4EDIhXB1tdTD0lcWhG9_du8gqj.jpg"
                     class="w-10 h-10 rounded-full object-cover"
                     alt="Default Avatar" />

                <div class="text-sm">
                    <p class="font-medium text-gray-800" th:text="${adminStay.name}">Admin</p>
                    <p class="text-gray-500 text-xs" th:text="${adminStay.email}">admin@gmail.com</p>
                </div>
            </div>

            <a href="javascript:void(0);"
               class="w-full flex items-center justify-center gap-2 text-sm text-gray-600 border rounded py-2 hover:bg-gray-50 font-semibold" onclick="openLogoutModal()">
                <svg class="h-6 w-6"  width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">  <path stroke="none" d="M0 0h24v24H0z"/>  <path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2" />  <path d="M20 12h-13l3 -3m0 6l-3 -3" /></svg> Log out
            </a>
        </div>
    </div>
    <div th:replace="~{auth/confirm_logout_modal :: confirmLogoutModal(
    'logoutModal',
    'Logout Confirmation',
    'Are you sure you want to logout?',
    '/auth/logout'
)}"></div>
    <script>
        function openLogoutModal() {
            document.getElementById("logoutModal").classList.remove("hidden");

            const logoutButton = document.querySelector("#logoutModal .confirm-logout-button");
            if (logoutButton) {
                logoutButton.onclick = function () {
                    const url = logoutButton.getAttribute("data-logout-url");
                    window.location.href = url;
                };
            }
        }

        function closeModal(button) {
            button.closest(".fixed").classList.add("hidden");
        }
    </script>
</div>

</body>
</html>